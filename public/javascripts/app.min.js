angular.module("app",["app.tpl","ngSanitize","ngCookies","ui.select","ui.bootstrap","ngRoute","main","other","pattern"]).constant("API_URL","/api/v1/").config(["$httpProvider","$locationProvider",function(e,t){e.defaults.headers.common={"X-Requested-With":"XMLHttpRequest"},t.html5Mode({enabled:!0,requireBase:!1})}]).run(["$http","$cookieStore","$log","$window",function(e,t,n,r){e.post("/api/v1/access_token",{grant_type:"client_credentials",client_id:r.Conf.clientId}).then(function(e){t.put("access_token",e.data.access_token)},function(e){n.error(e)})}]).run(["$injector","$cookieStore",function(e,t){e.get("$http").defaults.transformRequest=function(e,n){var r=t.get("access_token");r&&(n().Authorization="Bearer "+r)}}]),angular.module("main.controllers",[]).controller("IndexCtrl",["$scope","$location","$log","$timeout","DrugService","DrugsList","API_URL",function(e,t,n,r,o,i,a){function l(){e.followedDrugs=_.map(i.all(),function(e){return{name:e,isFollowed:!0}}),_.forEach(e.followedDrugs,function(e){r(function(){o.getDrugByName(e.name).then(function(t){e.details=t})},10)})}e.endpoint=a+"drugs",e.drug={},o.getTypeaheadDrugs().then(function(t){e.drugs=t}),l(),e.highlightClass=function(e){return e.details?e.details.recalls?"drug-status-recall":e.details.labelChanges?"drug-status-label":"drug-status-ok":"drug-status-loading"},e.toggleItem=function(e){i[e.isFollowed?"remove":"add"](e.name),e.isFollowed=!e.isFollowed},e.manuallySelectDrug=function(t){e.drug.selected=t.name},e.$watch("drug",function(){e.drug&&e.drug.selected&&t.path("/drugdetail").search("name",e.drug.selected)},!0)}]).controller("DrugDetailsCtrl",["$scope","$location","DrugService","DrugsList",function(e,t,n,r){e.drug=t.search().name,e.following=r.all().indexOf(e.drug)>-1,n.getDrugByName(e.drug).then(function(t){e.drugDetails=t}),e.toggleFollow=function(){r[e.following?"remove":"add"](e.drug),e.following=!e.following}}]),angular.module("main.filters",[]).filter("encodeURIComponent",function(){return window.encodeURIComponent}),angular.module("main",["main.controllers","main.routes","main.services","main.filters"]),angular.module("main.routes",[]).config(["$routeProvider",function(e){e.when("/",{templateUrl:"assets/main/partials/main-index.html",controller:"IndexCtrl"}).when("/drugdetail",{templateUrl:"assets/main/partials/drug-detail.html",controller:"DrugDetailsCtrl"})}]),function(){angular.module("main.services",[]).factory("DrugService",["API_URL","$http","$q","$log",function(e,t,n,r){return{getTypeaheadDrugs:function(){var e=n.defer();return t({url:"/assets/datasets/meds.json"}).success(function(t){e.resolve(t)}).error(function(){e.reject("Problem retrieving drug names for typeahead")}),e.promise},getDrugs:function(r){var o=n.defer(),i={method:"GET",url:e};return r&&(i.params.query=r),t(i).success(function(e){o.resolve(e)}).error(function(e){o.reject("Problem retrieving medicines: "+e)}),o.promise},getDrugByName:function(n){return t.get(e+"drugs/"+n).then(function(e){return e.data},function(e){r.error(e)})}}}]).factory("DrugsList",function(){return{all:function(){var e=window.localStorage.drugslist;return e?angular.fromJson(e):[]},save:function(e){window.localStorage.drugslist=angular.toJson(e)},add:function(e){var t=this.all();~t.indexOf(e)||t.push(e),this.save(t)},remove:function(e){var t=this.all(),n=t.indexOf(e);~n&&(t.splice(n,1),this.save(t))}}})}(),angular.module("other.controllers",[]).controller("OtherCtrl",["$scope",function(e){console.log("Hello other controller!")}]),angular.module("other",["other.controllers","other.routes"]),angular.module("other.routes",[]).config(["$routeProvider",function(e){e.when("/other",{templateUrl:"assets/other/partials/main.html",controller:"OtherCtrl"})}]),angular.module("pattern.controllers",[]).controller("PatternCtrl",["$scope",function(e){e.options=[{indy:"Aerospace"},{indy:"Banking"},{indy:"Commercial Contracts"},{indy:"Construction"},{indy:"Employment"},{indy:"Energy"},{indy:"Entertainment"},{indy:"Finance"},{indy:"Franchise Agreements"},{indy:"Healthcare"},{indy:"Hospitality"},{indy:"Insurance / Reinsurance"},{indy:"Intellectual Property"},{indy:"Licensing Agreements"},{indy:"Mass Claims / Class Actions"},{indy:"Mergers & Acquisitions"},{indy:"Oil & Gas"},{indy:"Partnerships"},{indy:"Pharmaceuticals"},{indy:"Securities Investments"},{indy:"Technology"},{indy:"Telecommunications"}]}]),angular.module("pattern",["pattern.controllers","pattern.routes"]),angular.module("pattern.routes",[]).config(["$routeProvider",function(e){e.when("/pattern",{templateUrl:"assets/pattern/partials/main.html",controller:"PatternCtrl"})}]);

