
angular.module("app",["app.tpl","ngSanitize","ngCookies","ui.select","ui.bootstrap","ngRoute","main","other","pattern"]).constant("API_URL","/api/v1/").config(["$httpProvider","$locationProvider",function(e,n){e.defaults.headers.common={"X-Requested-With":"XMLHttpRequest"},n.html5Mode({enabled:!0,requireBase:!1})}]).run(["$http","$cookieStore","$log","$window",function(e,n,t,r){e.post("/api/v1/access_token",{grant_type:"client_credentials",client_id:r.Conf.clientId}).then(function(e){n.put("access_token",e.data.access_token)},function(e){t.error(e)})}]).run(["$injector","$cookieStore",function(e,n){e.get("$http").defaults.transformRequest=function(e,t){var r=n.get("access_token");r&&(t().Authorization="Bearer "+r)}}]),angular.module("main.controllers",[]).controller("IndexCtrl",["$scope","$location","DrugService","DrugsList","API_URL",function(e,n,t,r,o){e.endpoint=o+"drugs",e.drug={},t.getTypeaheadDrugs().then(function(n){e.drugs=n}),e.followedDrugs=r.all(),e.$watch("drug",function(){e.drug&&e.drug.selected&&n.path("/drugdetail").search("name",e.drug.selected)},!0)}]).controller("DrugDetailsCtrl",["$scope","$location","DrugService","DrugsList",function(e,n,t,r){e.drug=n.search().name,e.following=r.all().indexOf(e.drug)>-1,t.getDrugByName(e.drug).then(function(n){e.drugDetails=n}),e.toggleFollow=function(){r[e.following?"remove":"add"](e.drug),e.following=!e.following}}]),angular.module("main.filters",[]).filter("encodeURIComponent",function(){return window.encodeURIComponent}),angular.module("main",["main.controllers","main.routes","main.services","main.filters"]),angular.module("main.routes",[]).config(["$routeProvider",function(e){e.when("/",{templateUrl:"assets/main/partials/main-index.html",controller:"IndexCtrl"}).when("/drugdetail",{templateUrl:"assets/main/partials/drug-detail.html",controller:"DrugDetailsCtrl"})}]),function(){angular.module("main.services",[]).factory("DrugService",["API_URL","$http","$q","$log",function(e,n,t,r){return{getTypeaheadDrugs:function(){var e=t.defer();return n({url:"/assets/datasets/meds.json"}).success(function(n){e.resolve(n)}).error(function(){e.reject("Problem retrieving drug names for typeahead")}),e.promise},getDrugs:function(r){var o=t.defer(),i={method:"GET",url:e};return r&&(i.params.query=r),n(i).success(function(e){o.resolve(e)}).error(function(e){o.reject("Problem retrieving medicines: "+e)}),o.promise},getDrugByName:function(t){return n.get(e+"drugs/"+t).then(function(e){return e.data},function(e){r.error(e)})}}}]).factory("DrugsList",function(){return{all:function(){var e=window.localStorage.drugslist;return e?angular.fromJson(e):[]},save:function(e){window.localStorage.drugslist=angular.toJson(e)},add:function(e){var n=this.all();~n.indexOf(e)||n.push(e),this.save(n)},remove:function(e){var n=this.all(),t=n.indexOf(e);~t&&(n.splice(t,1),this.save(n))}}})}(),angular.module("other.controllers",[]).controller("OtherCtrl",["$scope",function(e){console.log("Hello other controller!")}]),angular.module("other",["other.controllers","other.routes"]),angular.module("other.routes",[]).config(["$routeProvider",function(e){e.when("/other",{templateUrl:"assets/other/partials/main.html",controller:"OtherCtrl"})}]),angular.module("pattern.controllers",[]).controller("PatternCtrl",["$scope",function(e){e.options=[{indy:"Aerospace"},{indy:"Banking"},{indy:"Commercial Contracts"},{indy:"Construction"},{indy:"Employment"},{indy:"Energy"},{indy:"Entertainment"},{indy:"Finance"},{indy:"Franchise Agreements"},{indy:"Healthcare"},{indy:"Hospitality"},{indy:"Insurance / Reinsurance"},{indy:"Intellectual Property"},{indy:"Licensing Agreements"},{indy:"Mass Claims / Class Actions"},{indy:"Mergers & Acquisitions"},{indy:"Oil & Gas"},{indy:"Partnerships"},{indy:"Pharmaceuticals"},{indy:"Securities Investments"},{indy:"Technology"},{indy:"Telecommunications"}]}]),angular.module("pattern",["pattern.controllers","pattern.routes"]),angular.module("pattern.routes",[]).config(["$routeProvider",function(e){e.when("/pattern",{templateUrl:"assets/pattern/partials/main.html",controller:"PatternCtrl"})}]);
